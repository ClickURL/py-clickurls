-- Fixture data
-- depends: 

CREATE TABLE users
(
    id         SERIAL    NOT NULL,
    name       VARCHAR   NOT NULL,
    created_at TIMESTAMP NOT NULL,
    updated_at TIMESTAMP NOT NULL,
    deleted_at TIMESTAMP,
    PRIMARY KEY (id)
);
INSERT INTO users (name, created_at, updated_at)
VALUES ('Anton', '2023-04-12 12:00:00', '2023-04-12 12:00:00'),
       ('Oleg', '2023-04-12 12:00:00', '2023-04-12 12:00:00'),
       ('Kaban', '2023-04-12 12:00:00', '2023-04-12 12:00:00');

CREATE TABLE urls
(
    id                  SERIAL    NOT NULL,
    original_url        VARCHAR   NOT NULL,
    short_url           VARCHAR   NOT NULL,
    secret_access_token uuid      NOT NULL,
    created_at          TIMESTAMP NOT NULL,
    updated_at          TIMESTAMP NOT NULL,
    deleted_at          TIMESTAMP NULL,
    created_by          INTEGER,
    PRIMARY KEY (id),
    FOREIGN KEY (created_by) REFERENCES users (id) ON DELETE RESTRICT
);
INSERT INTO urls (original_url, short_url, secret_access_token, created_at, updated_at, created_by)
VALUES ('https://fastapi.tiangolo.com/', '12345', 'a8098c1a-f86e-11da-bd1a-00112444be1e', '2023-04-12 12:00:00',
        '2023-04-12 12:00:00', 1),
       ('https://plotly.com/graphing-libraries/', '54321', 'a8098c1a-f86e-11da-bd1a-00112444be2e',
        '2023-04-12 12:00:00', '2023-04-12 12:00:00', 2),
       ('https://docs.pydantic.dev/', 'qwert', 'a8098c1a-f86e-11da-bd1a-00112444be3e', '2023-04-12 12:00:00',
        '2023-04-12 12:00:00', 3);

CREATE TABLE prohibited_domain
(
    id   SERIAL  NOT NULL,
    name VARCHAR NOT NULL,
    PRIMARY KEY (id)
);
INSERT INTO prohibited_domain (name)
VALUES ('www.google.com'),
       ('www.facebook.com'),
       ('tsn.ua');

CREATE TABLE hour_views
(
    url_id    INTEGER   NOT NULL,
    hour_time TIMESTAMP NOT NULL,
    count     INTEGER   NOT NULL DEFAULT 0,
    PRIMARY KEY (url_id, hour_time)
);
INSERT INTO hour_views (hour_time, url_id)
VALUES ('2023-03-01 19:10:25.176803', '1'),
       ('2023-03-02 19:10:25.176803', '1'),
       ('2023-03-03 19:10:25.176803', '1'),
       ('2023-03-03 19:11:25.176803', '1'),
       ('2023-03-04 19:11:25.176803', '1'),
       ('2023-03-04 19:12:25.176803', '1'),
       ('2023-03-05 19:10:25.176803', '1'),
       ('2023-03-06 19:11:25.176803', '1'),
       ('2023-03-07 19:11:25.176803', '1'),
       ('2023-03-07 19:14:25.176803', '1'),
       ('2023-03-07 20:11:25.176803', '1'),
       ('2023-03-07 21:11:25.176803', '1'),
       ('2023-03-07 22:11:25.176803', '1'),
       ('2023-03-08 10:12:25.176803', '1'),
       ('2023-03-08 11:12:25.176803', '1'),
       ('2023-03-08 12:12:25.176803', '1'),
       ('2023-03-08 13:12:25.176803', '1'),
       ('2023-03-08 14:12:25.176803', '1'),
       ('2023-03-13 10:12:25.176803', '1'),
       ('2023-03-13 11:12:25.176803', '1'),
       ('2023-03-13 12:12:25.176803', '1'),
       ('2023-03-14 13:12:25.176803', '1'),
       ('2023-03-15 14:12:25.176803', '1'),
       ('2023-03-16 10:12:25.176803', '1'),
       ('2023-03-16 11:12:25.176803', '1'),
       ('2023-03-16 12:12:25.176803', '1'),
       ('2023-03-16 13:12:25.176803', '1'),
       ('2023-03-16 14:12:25.176803', '1'),
       ('2023-03-17 12:12:25.176803', '1'),
       ('2023-03-18 13:12:25.176803', '1'),
       ('2023-03-19 14:12:25.176803', '1'),
       ('2023-03-20 14:12:25.176803', '1'),
       ('2023-03-20 14:12:25.176803', '1'),
       ('2023-03-21 14:12:25.176803', '1'),
       ('2023-03-22 14:12:25.176803', '1'),
       ('2023-03-23 14:12:25.176803', '1'),
       ('2023-03-24 14:12:25.176803', '1'),
       ('2023-03-25 14:12:25.176803', '1'),
       ('2023-03-26 14:12:25.176803', '1'),
       ('2023-03-26 15:12:25.176803', '1'),
       ('2023-03-26 16:12:25.176803', '1'),
       ('2023-03-26 17:12:25.176803', '1'),
       ('2023-03-27 14:12:25.176803', '1'),
       ('2023-03-27 15:12:25.176803', '1'),
       ('2023-03-27 16:12:25.176803', '1'),
       ('2023-03-27 17:12:25.176803', '1'),
       ('2023-03-27 18:12:25.176803', '1'),
       ('2023-03-27 19:12:25.176803', '1'),
       ('2023-03-27 20:12:25.176803', '1'),
       ('2023-03-27 21:12:25.176803', '1'),
       ('2023-03-27 21:13:25.176803', '1'),
       ('2023-03-27 21:23:25.176803', '1'),
       ('2023-03-27 21:25:25.176803', '1'),
       ('2023-03-27 21:44:25.176803', '1'),
       ('2023-03-27 22:12:25.176803', '1'),
       ('2023-03-27 22:22:25.176803', '1'),
       ('2023-03-27 22:32:25.176803', '1'),
       ('2023-03-27 22:42:25.176803', '1'),
       ('2023-03-28 15:12:25.176803', '1'),
       ('2023-03-28 16:12:25.176803', '1'),
       ('2023-03-29 17:12:25.176803', '1'),
       ('2023-03-29 18:12:25.176803', '1'),
       ('2023-03-29 19:12:25.176803', '1'),
       ('2023-03-30 11:12:25.176803', '1'),
       ('2023-03-31 11:12:25.176803', '1'),
       ('2023-03-31 11:16:25.176803', '1'),
       ('2023-03-31 11:18:25.176803', '1'),
       ('2023-03-31 11:40:25.176803', '1'),
       ('2023-03-01 19:10:25.176803', '2'),
       ('2023-03-02 19:10:25.176803', '2'),
       ('2023-03-03 19:10:25.176803', '3'),
       ('2023-03-03 19:11:25.176803', '2'),
       ('2023-03-04 19:11:25.176803', '2'),
       ('2023-03-04 19:12:25.176803', '3'),
       ('2023-03-05 19:10:25.176803', '2'),
       ('2023-03-06 19:11:25.176803', '2'),
       ('2023-03-07 19:11:25.176803', '2'),
       ('2023-03-07 19:14:25.176803', '3'),
       ('2023-03-07 20:11:25.176803', '3'),
       ('2023-03-07 21:11:25.176803', '3'),
       ('2023-03-07 22:11:25.176803', '2'),
       ('2023-03-08 10:12:25.176803', '3'),
       ('2023-03-08 11:12:25.176803', '2'),
       ('2023-03-08 12:12:25.176803', '3'),
       ('2023-03-08 13:12:25.176803', '2'),
       ('2023-03-08 14:12:25.176803', '3'),
       ('2023-03-13 10:12:25.176803', '2'),
       ('2023-03-13 11:12:25.176803', '3'),
       ('2023-03-13 12:12:25.176803', '2'),
       ('2023-03-14 13:12:25.176803', '3'),
       ('2023-03-15 14:12:25.176803', '2'),
       ('2023-03-16 10:12:25.176803', '3'),
       ('2023-03-16 11:12:25.176803', '2'),
       ('2023-03-16 12:12:25.176803', '3'),
       ('2023-03-16 13:12:25.176803', '2'),
       ('2023-03-16 14:12:25.176803', '3'),
       ('2023-03-17 12:12:25.176803', '3'),
       ('2023-03-18 13:12:25.176803', '3'),
       ('2023-03-19 14:12:25.176803', '3'),
       ('2023-03-20 14:12:25.176803', '3'),
       ('2023-03-20 14:12:25.176803', '2'),
       ('2023-03-21 14:12:25.176803', '2'),
       ('2023-03-22 14:12:25.176803', '2'),
       ('2023-03-23 14:12:25.176803', '2'),
       ('2023-03-24 14:12:25.176803', '3'),
       ('2023-03-25 14:12:25.176803', '3'),
       ('2023-03-26 14:12:25.176803', '3'),
       ('2023-03-26 15:12:25.176803', '2'),
       ('2023-03-26 16:12:25.176803', '2'),
       ('2023-03-26 17:12:25.176803', '2'),
       ('2023-03-27 14:12:25.176803', '2'),
       ('2023-03-27 15:12:25.176803', '2'),
       ('2023-03-27 16:12:25.176803', '3'),
       ('2023-03-27 17:12:25.176803', '2'),
       ('2023-03-27 18:12:25.176803', '2'),
       ('2023-03-27 19:12:25.176803', '2'),
       ('2023-03-27 20:12:25.176803', '2'),
       ('2023-03-27 21:12:25.176803', '2'),
       ('2023-03-27 21:13:25.176803', '2'),
       ('2023-03-27 21:23:25.176803', '3'),
       ('2023-03-27 21:25:25.176803', '2'),
       ('2023-03-27 21:44:25.176803', '3'),
       ('2023-03-27 22:12:25.176803', '3'),
       ('2023-03-27 22:22:25.176803', '3'),
       ('2023-03-27 22:32:25.176803', '3'),
       ('2023-03-27 22:42:25.176803', '3'),
       ('2023-03-28 15:12:25.176803', '3'),
       ('2023-03-28 16:12:25.176803', '3'),
       ('2023-03-29 17:12:25.176803', '3'),
       ('2023-03-29 18:12:25.176803', '2'),
       ('2023-03-29 19:12:25.176803', '2'),
       ('2023-03-30 11:12:25.176803', '2'),
       ('2023-03-31 11:12:25.176803', '2'),
       ('2023-03-31 11:16:25.176803', '3'),
       ('2023-03-31 11:18:25.176803', '3'),
       ('2023-03-31 11:40:25.176803', '2');